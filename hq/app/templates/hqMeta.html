{% extends "base.html" %}

{% block content %}

<table>
<tr>
    <td colspan="3"></td>
    <th>Date</th>
    <th>Close</th>
    <th>Change</th>
    <th>CL</th>
    <th>HL</th>
    <!-- <th colspan="4">5-day-diff</th> -->
    {% for nDaysDiff in hqMetas[0].nDaysDiffs %}
        <th colspan="2">{{nDaysDiff.nDays}} days diff</th>
    {% endfor %}
</tr>
{% for hqMeta in hqMetas %}

    <tr>
        <td>
            <a href="{{hqUrl.q.format(hqMeta.ticker, hqMeta.ticker)}}" target="_blank">{{hqMeta.ticker}}</a></td>
        <td>
            <a href="{{hqUrl.h.format(hqMeta.ticker, hqMeta.ticker)}}" target="_blank">H</a></td>
        <td>
            <a href="/hqCsv?ticker={{hqMeta.ticker}}" target="_blank">Csv</a></td>

        <td>{{hqMeta.date[5:]}}</td>
        <td align="right">{{round(hqMeta.close,2)}}</td>
        <td align="right"
            {% if hqMeta.change > 0 %}
                class="green"
            {% endif %}
            {% if hqMeta.change < 0 %}
                class="red"
            {% endif %}
            >{{round(100*hqMeta.change,2)}}%</td>
        <td align="right">{{round(100*hqMeta.CL,2)}}%</td>
        <td align="right">{{round(100*hqMeta.HL,2)}}%</td>
        {% for nDaysDiff in hqMeta.nDaysDiffs %}
        <!-- down -->
        <!-- <td>{{nDaysDiff.nDaysHighest}}</td> -->
        <td align="right"
            {% if nDaysDiff.downDiff <= downAlert %}
                class="red"
            {% endif %}
            >
            <span title="nDays ago: {{nDaysDiff.nDaysHighest}}">{{round(100*nDaysDiff.downDiff,2)}}%</span>
        </td>
        <!-- up -->
        <!-- <td>{{nDaysDiff.nDaysLowest}}</td> -->
        <td align="right"
            {% if nDaysDiff.upDiff >= upAlert %}
                class="green"
            {% endif %}
            >
            <span title="nDays ago: {{nDaysDiff.nDaysLowest}}">{{round(100*nDaysDiff.upDiff,2)}}%</span>
        </td>
        {% endfor %}
        
    </tr>

{% endfor %}
</table>

{% endblock %}